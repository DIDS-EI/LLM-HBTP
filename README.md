# HBTP: Heuristic Behavior Tree Planning with Large Language Model Reasoning

<div align="center">

[[Website]](https://dids-ei.github.io/Project/HBTP/)

![Python Version](images/python310.svg)
![GitHub license](images/license.svg)

______________________________________________________________________

<img src="images/framework.png" width="70%">
</div>

## ðŸŒ³ Introduction

This repository houses the HBTP package, which integrates large language models, behavior trees, and simulation platforms to foster the development of intelligent agents.

## ðŸ“‚ Directory Structure

```
LLM-HBTP
â””â”€â”€ btgym
    â”œâ”€â”€ agent                     # Configuration for intelligent agents.
    â”œâ”€â”€ algos                     # Training and decision-making algorithms.
    â”‚   â”œâ”€â”€ bt_autogen            # Autonomous behavior tree generation.
    â”‚   â”‚   â””â”€â”€ OptimalBTExpansionAlgorithm.py  # Core HOBTEA algorithm implementation.
    â”‚   â””â”€â”€ llm_client            # Modules for large language model integration.
    â”œâ”€â”€ behavior_tree              # Behavior tree engine components.
    â”œâ”€â”€ envs                       # Scene environments for agent interaction.
    â”‚   â”œâ”€â”€ base                   # Foundational elements for environments.
    â”‚   â”œâ”€â”€ gridworld              # Grid-based testing environment.
    â”‚   â”œâ”€â”€ robowaiter             # CafÃ© service robot scenario.
    â”‚   â”œâ”€â”€ virtualhome            # Household robot scenario.
    â”‚   â”œâ”€â”€ virtualhomwtest        # Testing environment for household robots.
    â”‚   â””â”€â”€ virtualhomwtestsmall    # Smaller version of the household robot testing environment.
    â””â”€â”€ utils                      # Supporting functions and utilities.
â””â”€â”€ simulators                    # Platforms for realistic training environments.
â””â”€â”€ test                          # Testing modules for behavior trees, LLMs, and scene environments.

```

## ðŸ”§ Installation

Create and activate a new Conda environment:

```shell
conda create --name btgym python=3.10
conda activate btgym
```

Install BTGym:

```shell
cd BTGym
pip install -e .
```

### 1. Download the VirtualHome executable for your platform (Only Windows is tested now):

| Operating System | Download Link                                                                      |
|:-----------------|:-----------------------------------------------------------------------------------|
| Linux            | [Download](http://virtual-home.org/release/simulator/v2.0/v2.3.0/linux_exec.zip)   |
| MacOS            | [Download](http://virtual-home.org/release/simulator/v2.0/v2.3.0/macos_exec.zip)   |
| Windows          | [Download](http://virtual-home.org/release/simulator/v2.0/v2.3.0/windows_exec.zip) |

### 2. Download the RoboWaiter executable (Only Windows is tested now):

ðŸ‘‰ [Download RoboWaiter](https://drive.google.com/file/d/1ayAQZbPOyQV2W-V_ZdYv6AoqLOg0zvm1/view?usp=sharing)

Download the simulator, unzip it, and run `CafeSimulator.exe` to open the simulator. The simulator will display an empty scene, awaiting the code to generate the scene and complete robot interactions.

## ðŸš€ Usage

1. Download the simulator.
2. Unzip the downloaded files and move them to `simulators/virtualhome/windows`.
3. Execute `watch_tv.py` to view the simulation:
   ```python
   python test/watch_tv.py
   ```
4. Execute `VHT_main.py` to see the results from the LLM-HOBTEA framework:
   ```python
   python test/VHT_main.py
   ```

These modifications include the addition of relevant icons to each section header for better visual distinction and to match the content topics more closely.


## ðŸŽ® Simulation
The images below illustrate examples from two simulation scenarios, including behavior trees generated by LLM-HOBTEA and their corresponding simulation environments.

### RoboWaiter
The RoboWaiter scenario involves a service robot performing tasks in a cafÃ© setting. 

**Goal:** `On(Coffee,Table3) & Active(AC)`

<img src="images/RW.svg" width="60%">

### VirtualHome
The VirtualHome scenario simulates a household environment where a robot performs various domestic tasks.

**Goal:** `IsIn(bananas,fridge) & IsClose(fridge)`

<img src="images/VH.svg" width="60%">


## ðŸ“œ License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.


